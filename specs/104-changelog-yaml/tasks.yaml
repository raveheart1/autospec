tasks:
    branch: "104-changelog-yaml"
    created: "2026-01-16"
    spec_path: "specs/104-changelog-yaml/spec.yaml"
    plan_path: "specs/104-changelog-yaml/plan.yaml"
summary:
    total_tasks: 32
    total_phases: 8
    parallel_opportunities: 14
    estimated_complexity: "high"
phases:
    - number: 1
      title: "Setup"
      purpose: "Create package structure and foundational files"
      tasks:
        - id: "T001"
          title: "Create internal/changelog/ package directory structure"
          status: "Completed"
          type: "setup"
          parallel: false
          story_id: null
          file_path: "internal/changelog/"
          dependencies: []
          acceptance_criteria:
            - "Directory internal/changelog/ exists"
            - "Package can be imported by other internal packages"
    - number: 2
      title: "Foundational - Core Types and Parser"
      purpose: "Establish CHANGELOG.yaml schema and parsing infrastructure (Phase 1 from plan)"
      tasks:
        - id: "T002"
          title: "Implement Changelog, Version, Changes, Entry types in internal/changelog/types.go"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: null
          file_path: "internal/changelog/types.go"
          dependencies: ["T001"]
          acceptance_criteria:
            - "Changelog struct with Project and Versions fields"
            - "Version struct with Version, Date, and Changes fields"
            - "Changes struct with six Keep a Changelog categories"
            - "Entry struct for flattened querying"
            - "YAML tags on all fields"
        - id: "T003"
          title: "Implement YAML parser with Load and Validate functions in internal/changelog/parser.go"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: null
          file_path: "internal/changelog/parser.go"
          dependencies: ["T002"]
          acceptance_criteria:
            - "Load function parses YAML from file path"
            - "LoadFromReader function for testing"
            - "Validate function checks schema constraints"
            - "Validation errors include line numbers and expected format"
            - "Only one 'unreleased' version allowed"
            - "Date required for non-unreleased versions"
        - id: "T004"
          title: "Add parser unit tests in internal/changelog/parser_test.go"
          status: "Completed"
          type: "test"
          parallel: false
          story_id: null
          file_path: "internal/changelog/parser_test.go"
          dependencies: ["T003"]
          acceptance_criteria:
            - "Map-based table tests for valid YAML parsing"
            - "Tests for all validation error conditions"
            - "Tests for edge cases (empty file, missing fields, malformed dates)"
        - id: "T005"
          title: "Add parser benchmark tests in internal/changelog/parser_bench_test.go"
          status: "Completed"
          type: "test"
          parallel: true
          story_id: null
          file_path: "internal/changelog/parser_bench_test.go"
          dependencies: ["T003"]
          acceptance_criteria:
            - "Benchmark for parsing 1000-entry changelog"
            - "Verify <10ms parsing requirement"
    - number: 3
      title: "User Story 1 - Edit changelog in YAML format (US-001)"
      purpose: "Enable editing CHANGELOG.yaml as single source of truth"
      story_reference: "US-001"
      independent_test: "Edit internal/changelog/changelog.yaml, verify it parses correctly"
      tasks:
        - id: "T006"
          title: "Migrate existing CHANGELOG.md to internal/changelog/changelog.yaml"
          status: "InProgress"
          type: "implementation"
          parallel: false
          story_id: "US-001"
          file_path: "internal/changelog/changelog.yaml"
          dependencies: ["T004"]
          acceptance_criteria:
            - "All existing versions from CHANGELOG.md preserved"
            - "Entries categorized correctly (added, changed, fixed, etc.)"
            - "Dates preserved in YYYY-MM-DD format"
            - "Unreleased section present"
            - "File passes validation"
        - id: "T007"
          title: "Implement go:embed directive in internal/changelog/embed.go"
          status: "Pending"
          type: "implementation"
          parallel: true
          story_id: "US-001"
          file_path: "internal/changelog/embed.go"
          dependencies: ["T006"]
          acceptance_criteria:
            - "go:embed directive embeds changelog.yaml"
            - "Embedded function provides access to embedded content"
            - "LoadEmbedded function parses embedded YAML"
    - number: 4
      title: "User Story 2 - Auto-generate CHANGELOG.md (US-002)"
      purpose: "Generate markdown from YAML to maintain sync"
      story_reference: "US-002"
      independent_test: "Run make changelog-sync and verify CHANGELOG.md matches YAML content"
      tasks:
        - id: "T008"
          title: "Implement markdown renderer in internal/changelog/render.go"
          status: "Pending"
          type: "implementation"
          parallel: false
          story_id: "US-002"
          file_path: "internal/changelog/render.go"
          dependencies: ["T006"]
          acceptance_criteria:
            - "RenderMarkdown function generates Keep a Changelog format"
            - "Proper headers for project and versions"
            - "Categories rendered in standard order"
            - "Empty categories omitted"
            - "Idempotent output"
        - id: "T009"
          title: "Add renderer unit tests in internal/changelog/render_test.go"
          status: "Pending"
          type: "test"
          parallel: false
          story_id: "US-002"
          file_path: "internal/changelog/render_test.go"
          dependencies: ["T008"]
          acceptance_criteria:
            - "Map-based table tests for markdown generation"
            - "Tests for all category types"
            - "Tests for empty versions/categories"
            - "Tests for idempotency"
        - id: "T010"
          title: "Add make changelog-sync target to Makefile"
          status: "Pending"
          type: "implementation"
          parallel: true
          story_id: "US-002"
          file_path: "Makefile"
          dependencies: ["T008"]
          acceptance_criteria:
            - "Target generates CHANGELOG.md from YAML"
            - "Uses go run or built binary"
            - "Overwrites existing CHANGELOG.md"
        - id: "T011"
          title: "Add make changelog-check target to Makefile"
          status: "Pending"
          type: "implementation"
          parallel: true
          story_id: "US-002"
          file_path: "Makefile"
          dependencies: ["T010"]
          acceptance_criteria:
            - "Target validates CHANGELOG.md matches YAML"
            - "Exit code 0 when in sync"
            - "Exit code 1 with useful diff when out of sync"
    - number: 5
      title: "User Story 3 - View changelog via CLI (US-003)"
      purpose: "Implement autospec changelog command with subcommands"
      story_reference: "US-003"
      independent_test: "Run autospec changelog and verify it displays embedded changelog entries"
      tasks:
        - id: "T012"
          title: "Implement query functions in internal/changelog/query.go"
          status: "Pending"
          type: "implementation"
          parallel: false
          story_id: "US-003"
          file_path: "internal/changelog/query.go"
          dependencies: ["T007"]
          acceptance_criteria:
            - "GetVersion function retrieves specific version"
            - "GetLastN function retrieves N most recent entries"
            - "GetUnreleased function retrieves unreleased changes"
            - "ListVersions function lists all available versions"
            - "Version normalization (accepts v0.6.0 or 0.6.0)"
        - id: "T013"
          title: "Add query unit tests in internal/changelog/query_test.go"
          status: "Pending"
          type: "test"
          parallel: false
          story_id: "US-003"
          file_path: "internal/changelog/query_test.go"
          dependencies: ["T012"]
          acceptance_criteria:
            - "Map-based table tests for all query functions"
            - "Tests for version not found error"
            - "Tests for version normalization"
            - "Tests for empty changelog"
        - id: "T014"
          title: "Implement terminal formatter in internal/changelog/format.go"
          status: "Pending"
          type: "implementation"
          parallel: true
          story_id: "US-003"
          file_path: "internal/changelog/format.go"
          dependencies: ["T012"]
          acceptance_criteria:
            - "FormatTerminal function renders entries with colors"
            - "Color-coded categories (Added=green, Fixed=yellow, etc.)"
            - "Icons per category"
            - "Plain format option"
            - "80-column terminal wrapping"
        - id: "T015"
          title: "Implement autospec changelog command in internal/cli/changelog.go"
          status: "Pending"
          type: "implementation"
          parallel: false
          story_id: "US-003"
          file_path: "internal/cli/changelog.go"
          dependencies: ["T014"]
          acceptance_criteria:
            - "changelog command shows 5 most recent entries by default"
            - "changelog <version> shows specific version"
            - "changelog unreleased shows unreleased changes"
            - "--last N flag controls entry count"
            - "--plain flag disables colors"
            - "Uses embedded changelog"
        - id: "T016"
          title: "Implement autospec changelog extract subcommand"
          status: "Pending"
          type: "implementation"
          parallel: false
          story_id: "US-003"
          file_path: "internal/cli/changelog.go"
          dependencies: ["T015"]
          acceptance_criteria:
            - "extract <version> outputs markdown for that version"
            - "Output suitable for GitHub release notes"
            - "Error with available versions list if version not found"
            - "Exit code 1 on error"
        - id: "T017"
          title: "Implement autospec changelog sync subcommand"
          status: "Pending"
          type: "implementation"
          parallel: false
          story_id: "US-003"
          file_path: "internal/cli/changelog.go"
          dependencies: ["T016"]
          acceptance_criteria:
            - "sync regenerates CHANGELOG.md from YAML"
            - "check --check validates sync status"
            - "Returns appropriate exit codes"
        - id: "T018"
          title: "Add changelog CLI unit tests in internal/cli/changelog_test.go"
          status: "Pending"
          type: "test"
          parallel: false
          story_id: "US-003"
          file_path: "internal/cli/changelog_test.go"
          dependencies: ["T017"]
          acceptance_criteria:
            - "Map-based table tests for command execution"
            - "Tests for all flags and subcommands"
            - "Tests for error conditions"
    - number: 6
      title: "User Story 6 - Extract release notes (US-006) and Update Integration (US-004, US-005)"
      purpose: "GitHub release extraction and update/ck changelog display"
      story_reference: "US-006"
      independent_test: "Run autospec changelog extract v0.6.0, verify it outputs correct markdown"
      tasks:
        - id: "T019"
          title: "Update internal/cli/util/check.go to show changelog preview"
          status: "Pending"
          type: "implementation"
          parallel: false
          story_id: "US-005"
          file_path: "internal/cli/util/check.go"
          dependencies: ["T015"]
          acceptance_criteria:
            - "ck command shows 2-3 highlights when update available"
            - "Truncation indicator for more changes"
            - "Suggestion to view full changelog"
        - id: "T020"
          title: "Implement remote changelog fetch for ck command"
          status: "Pending"
          type: "implementation"
          parallel: false
          story_id: "US-005"
          file_path: "internal/changelog/remote.go"
          dependencies: ["T019"]
          acceptance_criteria:
            - "FetchRemote function fetches from GitHub raw URL"
            - "Graceful fallback when offline"
            - "Timeout handling"
        - id: "T021"
          title: "Update internal/update/ to show changelog after successful update"
          status: "Pending"
          type: "implementation"
          parallel: true
          story_id: "US-004"
          file_path: "internal/update/update.go"
          dependencies: ["T015"]
          acceptance_criteria:
            - "Update completion shows new version highlights"
            - "Suggests autospec changelog <version> for details"
        - id: "T022"
          title: "Update .github/workflows to use Go extractor instead of bash script"
          status: "Pending"
          type: "implementation"
          parallel: true
          story_id: "US-006"
          file_path: ".github/workflows/release.yml"
          dependencies: ["T016"]
          acceptance_criteria:
            - "Release workflow uses autospec changelog extract"
            - "GitHub release description populated from YAML source"
    - number: 7
      title: "User Story 7 & 8 - Slash Commands (US-007, US-008)"
      purpose: "Update /changelog and /release commands for YAML-first workflow"
      story_reference: "US-007"
      independent_test: "Run /changelog command, verify entries added to YAML and MD synced"
      tasks:
        - id: "T023"
          title: "Update .claude/commands/changelog.md for YAML-first workflow"
          status: "Pending"
          type: "implementation"
          parallel: true
          story_id: "US-007"
          file_path: ".claude/commands/changelog.md"
          dependencies: ["T017"]
          acceptance_criteria:
            - "Command edits CHANGELOG.yaml under unreleased"
            - "Runs make changelog-sync after editing"
            - "Follows existing command patterns"
        - id: "T024"
          title: "Update .claude/commands/release.md for YAML-first workflow"
          status: "Pending"
          type: "implementation"
          parallel: true
          story_id: "US-008"
          file_path: ".claude/commands/release.md"
          dependencies: ["T017"]
          acceptance_criteria:
            - "Release updates CHANGELOG.yaml (unreleased -> version)"
            - "Adds new empty unreleased section"
            - "Runs make changelog-sync"
            - "Uses Go extractor for validation"
    - number: 8
      title: "Polish & Cross-Cutting Concerns"
      purpose: "Documentation, E2E tests, cleanup, and final validation"
      tasks:
        - id: "T025"
          title: "Update CLAUDE.md with YAML-first changelog workflow note"
          status: "Pending"
          type: "documentation"
          parallel: true
          story_id: null
          file_path: "CLAUDE.md"
          dependencies: ["T017"]
          acceptance_criteria:
            - "Brief note about editing internal/changelog/changelog.yaml"
            - "Reference to make changelog-sync"
            - "Concise (not excessive detail)"
        - id: "T026"
          title: "Create docs/public/changelog-yaml.md user documentation"
          status: "Pending"
          type: "documentation"
          parallel: true
          story_id: null
          file_path: "docs/public/changelog-yaml.md"
          dependencies: ["T017"]
          acceptance_criteria:
            - "Documents YAML-first workflow"
            - "Explains all changelog CLI commands"
            - "Includes examples"
            - "Documents make targets"
        - id: "T027"
          title: "Add E2E tests for changelog commands in tests/e2e/changelog_test.go"
          status: "Pending"
          type: "test"
          parallel: false
          story_id: null
          file_path: "tests/e2e/changelog_test.go"
          dependencies: ["T017"]
          acceptance_criteria:
            - "Builds real binary"
            - "Tests autospec changelog command"
            - "Tests autospec changelog <version>"
            - "Tests autospec changelog extract"
            - "Tests error handling"
        - id: "T028"
          title: "Remove deprecated .release/extract-changelog.sh script"
          status: "Pending"
          type: "refactor"
          parallel: true
          story_id: null
          file_path: ".release/extract-changelog.sh"
          dependencies: ["T022"]
          acceptance_criteria:
            - "Bash script deleted"
            - "No references to script remain"
            - "CI uses Go extractor"
        - id: "T029"
          title: "Create .dev/tasks/104-changelog-yaml.md manual testing plan"
          status: "Pending"
          type: "documentation"
          parallel: true
          story_id: null
          file_path: ".dev/tasks/104-changelog-yaml.md"
          dependencies: ["T027"]
          acceptance_criteria:
            - "Core manual testing steps documented"
            - "Report Summaries section for results"
            - "Covers all user stories"
        - id: "T030"
          title: "Update CHANGELOG.md with feature entry via YAML workflow"
          status: "Pending"
          type: "documentation"
          parallel: false
          story_id: null
          file_path: "internal/changelog/changelog.yaml"
          dependencies: ["T029"]
          acceptance_criteria:
            - "Feature entry added to unreleased in YAML"
            - "make changelog-sync run to update MD"
            - "1-3 user-facing bullets summarizing feature"
        - id: "T031"
          title: "Run make test && make fmt && make lint && make build"
          status: "Pending"
          type: "test"
          parallel: false
          story_id: null
          file_path: null
          dependencies: ["T030"]
          acceptance_criteria:
            - "make test passes"
            - "make fmt passes"
            - "make lint passes"
            - "make build passes"
            - "All four exit with code 0"
        - id: "T032"
          title: "Add changelog-check to CI workflow"
          status: "Pending"
          type: "implementation"
          parallel: false
          story_id: null
          file_path: ".github/workflows/ci.yml"
          dependencies: ["T031"]
          acceptance_criteria:
            - "CI runs make changelog-check"
            - "Build fails if CHANGELOG.md out of sync"
dependencies:
    user_story_order:
        - story_id: "US-001"
          depends_on: []
          blocks: ["US-002", "US-003"]
        - story_id: "US-002"
          depends_on: ["US-001"]
          blocks: []
        - story_id: "US-003"
          depends_on: ["US-001"]
          blocks: ["US-004", "US-005", "US-006"]
        - story_id: "US-004"
          depends_on: ["US-003"]
          blocks: []
        - story_id: "US-005"
          depends_on: ["US-003"]
          blocks: []
        - story_id: "US-006"
          depends_on: ["US-003"]
          blocks: ["US-008"]
        - story_id: "US-007"
          depends_on: ["US-002", "US-003"]
          blocks: []
        - story_id: "US-008"
          depends_on: ["US-002", "US-003", "US-006"]
          blocks: []
    phase_order:
        - phase: 1
          blocks: [2]
        - phase: 2
          blocks: [3, 4, 5]
        - phase: 3
          blocks: [4]
        - phase: 4
          blocks: [5, 6]
        - phase: 5
          blocks: [6, 7]
        - phase: 6
          blocks: [7, 8]
        - phase: 7
          blocks: [8]
parallel_execution:
    - phase: 2
      parallel_groups:
        - tasks: ["T004", "T005"]
          rationale: "Parser tests and benchmarks can be developed in parallel"
    - phase: 3
      parallel_groups:
        - tasks: ["T006", "T007"]
          rationale: "Migration and embed can be done together after parser ready"
    - phase: 4
      parallel_groups:
        - tasks: ["T010", "T011"]
          rationale: "Makefile targets are independent"
    - phase: 5
      parallel_groups:
        - tasks: ["T013", "T014"]
          rationale: "Query tests and terminal formatter can be developed in parallel"
    - phase: 6
      parallel_groups:
        - tasks: ["T021", "T022"]
          rationale: "Update integration and CI changes are independent"
    - phase: 7
      parallel_groups:
        - tasks: ["T023", "T024"]
          rationale: "Slash commands are independent of each other"
    - phase: 8
      parallel_groups:
        - tasks: ["T025", "T026", "T028", "T029"]
          rationale: "Documentation and cleanup tasks are independent"
implementation_strategy:
    mvp_scope:
        phases: [1, 2, 3, 4]
        description: "Setup + Foundational + US-001 (YAML editing) + US-002 (MD generation)"
        validation: "Edit CHANGELOG.yaml, run make changelog-sync, verify MD generated correctly"
    incremental_delivery:
        - milestone: "Core Infrastructure Ready"
          phases: [1, 2]
          deliverable: "Types, parser, and validation working - can parse and validate YAML"
        - milestone: "YAML-First Workflow"
          phases: [1, 2, 3, 4]
          deliverable: "Can edit YAML and generate MD - single source of truth established"
        - milestone: "CLI Integration"
          phases: [1, 2, 3, 4, 5]
          deliverable: "autospec changelog command working with all flags and subcommands"
        - milestone: "Full Feature"
          phases: [1, 2, 3, 4, 5, 6, 7, 8]
          deliverable: "Complete YAML-first changelog system with update integration and slash commands"
_meta:
    version: "1.0.0"
    generator: "autospec"
    generator_version: "0.9.0"
    created: "2026-01-16"
    artifact_type: "tasks"
