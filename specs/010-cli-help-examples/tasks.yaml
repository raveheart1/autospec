_meta:
    version: "1.0.0"
    generator: "autospec"
    generator_version: "dev"
    created: "2025-12-14T09:22:02Z"
    artifact_type: "tasks"
tasks:
    branch: "010-cli-help-examples"
    created: "2025-12-14"
    spec_path: "specs/010-cli-help-examples/spec.yaml"
    plan_path: "specs/010-cli-help-examples/plan.yaml"
summary:
    total_tasks: 24
    total_phases: 6
    parallel_opportunities: 8
    estimated_complexity: "medium"
phases:
    - number: 1
      title: "Setup"
      purpose: "Create new package structure for errors"
      tasks:
        - id: "T001"
          title: "Create internal/errors package directory structure"
          status: "Completed"
          type: "setup"
          parallel: false
          story_id: null
          file_path: "internal/errors/"
          dependencies: []
          acceptance_criteria:
            - "Directory internal/errors/ exists"
            - "Package can be imported by other internal packages"
    - number: 2
      title: "Foundational - Error Infrastructure"
      purpose: "Core error handling infrastructure that all user stories depend on"
      tasks:
        - id: "T002"
          title: "Create CLIError type and error categories in internal/errors/errors.go"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: null
          file_path: "internal/errors/errors.go"
          dependencies: ["T001"]
          acceptance_criteria:
            - "CLIError struct with Category, Message, Remediation, Usage fields"
            - "ErrorCategory enum with Argument, Configuration, Prerequisite, Runtime"
            - "Error() method implements error interface"
            - "NewArgumentError, NewConfigError, NewPrerequisiteError, NewRuntimeError constructors"
        - id: "T003"
          title: "Implement FormatError function with colored output in internal/errors/format.go"
          status: "Completed"
          type: "implementation"
          parallel: true
          story_id: null
          file_path: "internal/errors/format.go"
          dependencies: ["T002"]
          acceptance_criteria:
            - "FormatError takes CLIError and returns formatted string"
            - "Uses fatih/color for terminal colors with auto-detection"
            - "Shows error category, message, and remediation steps"
            - "Falls back gracefully when colors unavailable"
        - id: "T004"
          title: "Create common error message templates in internal/errors/messages.go"
          status: "Completed"
          type: "implementation"
          parallel: true
          story_id: null
          file_path: "internal/errors/messages.go"
          dependencies: ["T002"]
          acceptance_criteria:
            - "Templates for missing argument errors"
            - "Templates for missing prerequisite errors (spec.yaml, plan.yaml)"
            - "Templates for configuration errors"
            - "Templates for Claude CLI errors"
            - "All templates include specific remediation steps"
    - number: 3
      title: "User Story 1 - View usage examples in command help"
      purpose: "Add practical usage examples to all command --help output"
      story_reference: "US-001"
      independent_test: "Run --help on any command and verify examples section is present"
      tasks:
        - id: "T005"
          title: "Add Example field to root command in internal/cli/root.go"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: "US-001"
          file_path: "internal/cli/root.go"
          dependencies: ["T001"]
          acceptance_criteria:
            - "Root command has Example field populated"
            - "At least 2 practical examples showing common workflows"
            - "Examples fit within 80-column terminal width"
        - id: "T006"
          title: "Add Example field to specify command in internal/cli/specify.go"
          status: "Completed"
          type: "implementation"
          parallel: true
          story_id: "US-001"
          file_path: "internal/cli/specify.go"
          dependencies: ["T005"]
          acceptance_criteria:
            - "At least 2 examples showing feature description patterns"
            - "Examples demonstrate quoting and complex descriptions"
        - id: "T007"
          title: "Add Example field to plan command in internal/cli/plan.go"
          status: "Completed"
          type: "implementation"
          parallel: true
          story_id: "US-001"
          file_path: "internal/cli/plan.go"
          dependencies: ["T005"]
          acceptance_criteria:
            - "At least 2 examples showing optional prompt guidance"
            - "Examples demonstrate common planning scenarios"
        - id: "T008"
          title: "Add Example field to tasks command in internal/cli/tasks.go"
          status: "Completed"
          type: "implementation"
          parallel: true
          story_id: "US-001"
          file_path: "internal/cli/tasks.go"
          dependencies: ["T005"]
          acceptance_criteria:
            - "At least 2 examples showing task generation"
            - "Examples demonstrate prompt guidance for task granularity"
        - id: "T009"
          title: "Add Example field to implement command in internal/cli/implement.go"
          status: "Completed"
          type: "implementation"
          parallel: true
          story_id: "US-001"
          file_path: "internal/cli/implement.go"
          dependencies: ["T005"]
          acceptance_criteria:
            - "At least 2 examples showing spec-name and prompt options"
            - "Examples demonstrate targeting specific specs"
        - id: "T010"
          title: "Add Example field to run command in internal/cli/run.go"
          status: "Completed"
          type: "implementation"
          parallel: true
          story_id: "US-001"
          file_path: "internal/cli/run.go"
          dependencies: ["T005"]
          acceptance_criteria:
            - "At least 3 examples showing phase flag combinations"
            - "Examples demonstrate -spti, -a, and individual flags"
        - id: "T011"
          title: "Add Example field to remaining commands (all, workflow, init, doctor, status, config, version, constitution, clarify, checklist, analyze, update-task, migrate)"
          status: "InProgress"
          type: "implementation"
          parallel: false
          story_id: "US-001"
          file_path: "internal/cli/"
          dependencies: ["T005"]
          acceptance_criteria:
            - "All user-facing commands have Example field"
            - "Each command has at least 2 relevant examples"
            - "Examples fit 80-column width"
    - number: 4
      title: "User Story 2 - Understand errors with actionable guidance"
      purpose: "Update all commands to use structured errors with remediation steps"
      story_reference: "US-002"
      independent_test: "Trigger common error conditions and verify messages include next steps"
      tasks:
        - id: "T012"
          title: "Update specify command to use CLIError for argument and prerequisite errors"
          status: "Pending"
          type: "implementation"
          parallel: false
          story_id: "US-002"
          file_path: "internal/cli/specify.go"
          dependencies: ["T004"]
          acceptance_criteria:
            - "Missing feature description shows correct usage with example"
            - "Error messages include 'To fix this:' section"
            - "Exit codes remain unchanged"
        - id: "T013"
          title: "Update plan command to use CLIError for prerequisite errors"
          status: "Pending"
          type: "implementation"
          parallel: true
          story_id: "US-002"
          file_path: "internal/cli/plan.go"
          dependencies: ["T012"]
          acceptance_criteria:
            - "Missing spec.yaml error includes remediation steps"
            - "Points user to run specify command first"
        - id: "T014"
          title: "Update tasks command to use CLIError for prerequisite errors"
          status: "Pending"
          type: "implementation"
          parallel: true
          story_id: "US-002"
          file_path: "internal/cli/tasks.go"
          dependencies: ["T012"]
          acceptance_criteria:
            - "Missing plan.yaml error includes remediation steps"
            - "Points user to run plan command first"
        - id: "T015"
          title: "Update implement command to use CLIError for prerequisite errors"
          status: "Pending"
          type: "implementation"
          parallel: true
          story_id: "US-002"
          file_path: "internal/cli/implement.go"
          dependencies: ["T012"]
          acceptance_criteria:
            - "Missing tasks.yaml error includes remediation steps"
            - "Invalid spec-name format shows correct format examples"
        - id: "T016"
          title: "Update run, all, workflow commands to use CLIError"
          status: "Pending"
          type: "implementation"
          parallel: false
          story_id: "US-002"
          file_path: "internal/cli/"
          dependencies: ["T012"]
          acceptance_criteria:
            - "All phase commands use structured errors"
            - "Configuration errors show config file paths"
            - "Claude CLI errors suggest checking installation"
        - id: "T017"
          title: "Update doctor, config, init commands to use CLIError"
          status: "Pending"
          type: "implementation"
          parallel: true
          story_id: "US-002"
          file_path: "internal/cli/"
          dependencies: ["T016"]
          acceptance_criteria:
            - "Config file errors show expected file locations"
            - "Initialization errors are clear and actionable"
    - number: 5
      title: "User Story 3 - Preview command effects with dry-run"
      purpose: "Add --dry-run flag to commands with side effects"
      story_reference: "US-003"
      independent_test: "Run commands with --dry-run and verify no changes are made while output shows planned actions"
      tasks:
        - id: "T018"
          title: "Add DryRun field to workflow config in internal/config/config.go"
          status: "Pending"
          type: "implementation"
          parallel: false
          story_id: "US-003"
          file_path: "internal/config/config.go"
          dependencies: ["T004"]
          acceptance_criteria:
            - "DryRun boolean field in config struct"
            - "Can be set via flag or environment variable"
        - id: "T019"
          title: "Create dry-run execution logic in internal/workflow/dryrun.go"
          status: "Pending"
          type: "implementation"
          parallel: false
          story_id: "US-003"
          file_path: "internal/workflow/dryrun.go"
          dependencies: ["T018"]
          acceptance_criteria:
            - "DryRunResult struct with Actions, FilesToCreate, CommandsToRun"
            - "PreviewExecution function that returns planned actions"
            - "[DRY RUN] prefix in output"
        - id: "T020"
          title: "Add --dry-run flag to specify, plan, tasks commands"
          status: "Pending"
          type: "implementation"
          parallel: false
          story_id: "US-003"
          file_path: "internal/cli/"
          dependencies: ["T019"]
          acceptance_criteria:
            - "--dry-run flag accepted by specify, plan, tasks"
            - "Shows Claude command that would be run"
            - "Shows files that would be created/modified"
            - "No actual files created or Claude invoked"
        - id: "T021"
          title: "Add --dry-run flag to implement, run, all, workflow commands"
          status: "Pending"
          type: "implementation"
          parallel: false
          story_id: "US-003"
          file_path: "internal/cli/"
          dependencies: ["T020"]
          acceptance_criteria:
            - "--dry-run flag accepted by all phase-executing commands"
            - "Shows sequence of phases that would run"
            - "Shows tasks that would be implemented"
            - "Completes in under 1 second"
    - number: 6
      title: "Polish & Cross-Cutting Concerns"
      purpose: "Documentation, validation, and final polish"
      tasks:
        - id: "T022"
          title: "Update CLAUDE.md with --dry-run documentation and examples"
          status: "Pending"
          type: "documentation"
          parallel: true
          story_id: null
          file_path: "CLAUDE.md"
          dependencies: ["T021"]
          acceptance_criteria:
            - "Dry-run flag documented in CLI usage section"
            - "Examples show dry-run for common workflows"
            - "Output format described"
        - id: "T023"
          title: "Verify all help text fits 80-column terminal"
          status: "Pending"
          type: "refactor"
          parallel: true
          story_id: null
          file_path: "internal/cli/"
          dependencies: ["T011"]
          acceptance_criteria:
            - "No example lines exceed 80 characters"
            - "Long descriptions wrap appropriately"
            - "Help remains readable in narrow terminals"
        - id: "T024"
          title: "Manual testing of user scenarios from spec"
          status: "Pending"
          type: "implementation"
          parallel: false
          story_id: null
          file_path: "specs/010-cli-help-examples/"
          dependencies: ["T021", "T017", "T011"]
          acceptance_criteria:
            - "All acceptance scenarios from spec verified"
            - "Edge cases tested (--help with args, --dry-run with --verbose)"
            - "Exit codes unchanged for existing error paths"
dependencies:
    user_story_order:
        - story_id: "US-001"
          depends_on: []
          blocks: []
        - story_id: "US-002"
          depends_on: []
          blocks: []
        - story_id: "US-003"
          depends_on: []
          blocks: []
    phase_order:
        - phase: 1
          blocks: [2, 3]
        - phase: 2
          blocks: [4, 5]
        - phase: 3
          blocks: [6]
        - phase: 4
          blocks: [6]
        - phase: 5
          blocks: [6]
parallel_execution:
    - phase: 2
      parallel_groups:
        - tasks: ["T003", "T004"]
          rationale: "Different files, both depend only on T002"
    - phase: 3
      parallel_groups:
        - tasks: ["T006", "T007", "T008", "T009", "T010"]
          rationale: "Different command files, all depend on T005"
    - phase: 4
      parallel_groups:
        - tasks: ["T013", "T014", "T015"]
          rationale: "Different command files, all depend on T012"
    - phase: 6
      parallel_groups:
        - tasks: ["T022", "T023"]
          rationale: "Documentation and validation are independent"
implementation_strategy:
    mvp_scope:
        phases: [1, 2, 3]
        description: "Setup + Error infrastructure + Help examples for all commands"
        validation: "Run --help on any command and verify examples section present"
    incremental_delivery:
        - milestone: "Error Infrastructure Ready"
          phases: [1, 2]
          deliverable: "CLIError type and formatters ready for use"
        - milestone: "Help Examples Complete"
          phases: [1, 2, 3]
          deliverable: "All commands show usage examples in --help"
        - milestone: "Actionable Errors Complete"
          phases: [1, 2, 3, 4]
          deliverable: "All errors include remediation guidance"
        - milestone: "Full Feature Complete"
          phases: [1, 2, 3, 4, 5, 6]
          deliverable: "Examples, errors, and dry-run all functional"
