tasks:
    branch: "081-skip-permissions-flag"
    created: "2026-01-06"
    spec_path: "specs/081-skip-permissions-flag/spec.yaml"
    plan_path: "specs/081-skip-permissions-flag/plan.yaml"
summary:
    total_tasks: 10
    total_phases: 4
    parallel_opportunities: 4
    estimated_complexity: "low"
phases:
    - number: 1
      title: "Setup"
      purpose: "Prepare configuration infrastructure for new field"
      tasks:
        - id: "T001"
          title: "Add SkipPermissions field to Configuration struct in internal/config/config.go"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: null
          file_path: "internal/config/config.go"
          dependencies: []
          acceptance_criteria:
            - "SkipPermissions bool field exists in Configuration struct"
            - "Field has correct koanf tag: `koanf:\"skip_permissions\"`"
            - "Field is placed near other boolean config fields (UseSubscription, AutoCommit)"
        - id: "T002"
          title: "Add skip_permissions entry to KnownKeys map in internal/config/schema.go"
          status: "Completed"
          type: "implementation"
          parallel: true
          story_id: null
          file_path: "internal/config/schema.go"
          dependencies: ["T001"]
          acceptance_criteria:
            - "skip_permissions key exists in KnownKeys map"
            - "Type is set to bool"
            - "Description is clear and concise"
        - id: "T003"
          title: "Add skip_permissions default and template in internal/config/defaults.go"
          status: "Completed"
          type: "implementation"
          parallel: true
          story_id: null
          file_path: "internal/config/defaults.go"
          dependencies: ["T001"]
          acceptance_criteria:
            - "GetDefaults() returns skip_permissions: false"
            - "GetDefaultConfigTemplate() includes skip_permissions with helpful comment"
            - "Comment explains the flag enables --dangerously-skip-permissions for Claude"
    - number: 2
      title: "Foundational"
      purpose: "Wire configuration through executor to agent execution"
      tasks:
        - id: "T004"
          title: "Add SkipPermissions field to ClaudeExecutor struct in internal/workflow/claude.go"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: null
          file_path: "internal/workflow/claude.go"
          dependencies: ["T002", "T003"]
          acceptance_criteria:
            - "SkipPermissions bool field exists in ClaudeExecutor struct"
            - "Field is documented with a comment explaining its purpose"
        - id: "T005"
          title: "Set ExecOptions.Autonomous from SkipPermissions in executeWithAgent()"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: null
          file_path: "internal/workflow/claude.go"
          dependencies: ["T004"]
          acceptance_criteria:
            - "ExecOptions.Autonomous is set to ClaudeExecutor.SkipPermissions value"
            - "Setting happens before agent.Execute() call"
            - "Existing ExecOptions.Autonomous logic is preserved (not overwritten if already true)"
        - id: "T006"
          title: "Update all ClaudeExecutor instantiation sites to pass config.SkipPermissions"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: null
          file_path: "internal/workflow/claude.go"
          dependencies: ["T005"]
          acceptance_criteria:
            - "All NewClaudeExecutor calls receive SkipPermissions from config"
            - "Search codebase for ClaudeExecutor{ to find all instantiation sites"
            - "Each site correctly passes cfg.SkipPermissions"
    - number: 3
      title: "User Story 1 - Enable autonomous mode via simple config flag"
      purpose: "Users can enable autonomous mode with a single line of config"
      story_reference: "US-001"
      independent_test: "Set skip_permissions: true and verify --dangerously-skip-permissions appears in Claude command"
      tasks:
        - id: "T007"
          title: "Add config loading tests for skip_permissions in internal/config/config_test.go"
          status: "Completed"
          type: "test"
          parallel: true
          story_id: "US-001"
          file_path: "internal/config/config_test.go"
          dependencies: ["T006"]
          acceptance_criteria:
            - "Test verifies skip_permissions defaults to false"
            - "Test verifies skip_permissions: true is correctly loaded from YAML"
            - "Test verifies AUTOSPEC_SKIP_PERMISSIONS env var overrides config file"
            - "Tests use map-based table-driven pattern"
        - id: "T008"
          title: "Add ClaudeExecutor tests for ExecOptions.Autonomous in internal/workflow/claude_test.go"
          status: "Completed"
          type: "test"
          parallel: true
          story_id: "US-001"
          file_path: "internal/workflow/claude_test.go"
          dependencies: ["T006"]
          acceptance_criteria:
            - "Test verifies ExecOptions.Autonomous is true when SkipPermissions is true"
            - "Test verifies ExecOptions.Autonomous is false when SkipPermissions is false"
            - "Tests use map-based table-driven pattern"
    - number: 4
      title: "Quality Gates"
      purpose: "Ensure all quality checks pass before completion"
      tasks:
        - id: "T009"
          title: "Run make fmt && make lint and fix any issues"
          status: "Completed"
          type: "refactor"
          parallel: false
          story_id: null
          file_path: "Makefile"
          dependencies: ["T007", "T008"]
          acceptance_criteria:
            - "make fmt exits with code 0"
            - "make lint exits with code 0"
            - "No formatting or lint errors remain"
        - id: "T010"
          title: "Run make test && make build and verify success"
          status: "Completed"
          type: "test"
          parallel: false
          story_id: null
          file_path: "Makefile"
          dependencies: ["T009"]
          acceptance_criteria:
            - "make test exits with code 0"
            - "make build exits with code 0"
            - "All tests pass including new skip_permissions tests"
            - "Binary builds successfully for current platform"
dependencies:
    user_story_order:
        - story_id: "US-001"
          depends_on: []
          blocks: ["US-002"]
        - story_id: "US-002"
          depends_on: ["US-001"]
          blocks: []
    phase_order:
        - phase: 1
          blocks: [2]
        - phase: 2
          blocks: [3]
        - phase: 3
          blocks: [4]
parallel_execution:
    - phase: 1
      parallel_groups:
        - tasks: ["T002", "T003"]
          rationale: "Different files (schema.go vs defaults.go), both depend only on T001"
    - phase: 3
      parallel_groups:
        - tasks: ["T007", "T008"]
          rationale: "Different test files (config_test.go vs claude_test.go), independent test suites"
implementation_strategy:
    mvp_scope:
        phases: [1, 2, 3]
        description: "Config infrastructure + executor wiring + tests for US-001"
        validation: "Set skip_permissions: true in config and run autospec workflow - verify --dangerously-skip-permissions appears in Claude command output"
    incremental_delivery:
        - milestone: "Config Field Added"
          phases: [1]
          deliverable: "skip_permissions field recognized by config system, env var works"
        - milestone: "Full Feature Working"
          phases: [1, 2, 3]
          deliverable: "skip_permissions controls Claude's --dangerously-skip-permissions flag"
        - milestone: "Quality Verified"
          phases: [1, 2, 3, 4]
          deliverable: "All tests pass, linting clean, production-ready"
_meta:
    version: "1.0.0"
    generator: "autospec"
    generator_version: "autospec 0.8.1"
    created: "2026-01-06T03:30:05Z"
    artifact_type: "tasks"
