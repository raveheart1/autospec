tasks:
    branch: "039-blocked-task-reason"
    created: "2025-12-17"
    spec_path: "specs/039-blocked-task-reason/spec.yaml"
    plan_path: "specs/039-blocked-task-reason/plan.yaml"
summary:
    total_tasks: 18
    total_phases: 6
    parallel_opportunities: 6
    estimated_complexity: "medium"
phases:
    - number: 1
      title: "Setup"
      purpose: "Establish new task command structure"
      tasks:
        - id: "T001"
          title: "Create parent task command in internal/cli/task.go"
          status: "Completed"
          type: "setup"
          parallel: false
          story_id: null
          file_path: "internal/cli/task.go"
          dependencies: []
          acceptance_criteria:
            - "Parent 'task' command exists and is registered with root command"
            - "Running 'autospec task' shows help with available subcommands"
            - "Command follows Cobra CLI patterns used elsewhere in codebase"
    - number: 2
      title: "Foundational"
      purpose: "Extend data model and validation - MUST complete before user stories"
      tasks:
        - id: "T002"
          title: "Add BlockedReason field to TaskItem struct in internal/validation/tasks_yaml.go"
          status: "Completed"
          type: "implementation"
          parallel: true
          story_id: null
          file_path: "internal/validation/tasks_yaml.go"
          dependencies: ["T001"]
          acceptance_criteria:
            - "TaskItem struct includes BlockedReason string with yaml:\"blocked_reason,omitempty\" tag"
            - "Blocked is added to valid status enum values if not present"
            - "Existing tasks.yaml files without blocked_reason parse correctly"
        - id: "T003"
          title: "Add tests for TaskItem BlockedReason field parsing in internal/validation/tasks_yaml_test.go"
          status: "Completed"
          type: "test"
          parallel: true
          story_id: null
          file_path: "internal/validation/tasks_yaml_test.go"
          dependencies: ["T001"]
          acceptance_criteria:
            - "Test parsing task with blocked_reason field"
            - "Test parsing task without blocked_reason field (backward compat)"
            - "Test parsing task with status Blocked and blocked_reason"
            - "Tests use map-based table-driven pattern with t.Parallel()"
    - number: 3
      title: "User Story 1 - Document blocked task reason"
      purpose: "Enable developers and AI agents to add a reason when blocking a task"
      story_reference: "US-001"
      independent_test: "Block a task with a reason and verify the reason is stored and retrievable"
      tasks:
        - id: "T004"
          title: "Implement task block command in internal/cli/task_block.go"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: "US-001"
          file_path: "internal/cli/task_block.go"
          dependencies: ["T002"]
          acceptance_criteria:
            - "Command 'autospec task block <id> --reason <text>' implemented"
            - "Command changes task status to Blocked"
            - "Command sets blocked_reason field with provided reason"
            - "Uses yaml.Node traversal to preserve YAML formatting"
            - "Uses lifecycle wrapper for notifications"
            - "Handles re-blocking (updating reason on already blocked task)"
        - id: "T005"
          title: "Add tests for task block command in internal/cli/task_test.go"
          status: "Completed"
          type: "test"
          parallel: false
          story_id: "US-001"
          file_path: "internal/cli/task_test.go"
          dependencies: ["T004"]
          acceptance_criteria:
            - "Test blocking a Pending task"
            - "Test blocking an InProgress task"
            - "Test re-blocking an already blocked task (updates reason)"
            - "Test blocking with empty reason shows error"
            - "Test blocking non-existent task shows error"
            - "Tests use map-based table-driven pattern with t.Parallel()"
    - number: 4
      title: "User Story 2 - Unblock a task"
      purpose: "Allow unblocking tasks and optionally setting their new status"
      story_reference: "US-002"
      independent_test: "Unblock a blocked task and verify status changes and reason is handled appropriately"
      tasks:
        - id: "T006"
          title: "Implement task unblock command in internal/cli/task_unblock.go"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: "US-002"
          file_path: "internal/cli/task_unblock.go"
          dependencies: ["T004"]
          acceptance_criteria:
            - "Command 'autospec task unblock <id>' implemented"
            - "Command changes status to Pending by default"
            - "Command supports --status flag for InProgress or Pending"
            - "Command removes blocked_reason field from YAML"
            - "Uses yaml.Node traversal to preserve YAML formatting"
            - "Uses lifecycle wrapper for notifications"
            - "Shows warning if task is not currently blocked"
        - id: "T007"
          title: "Add tests for task unblock command in internal/cli/task_test.go"
          status: "Completed"
          type: "test"
          parallel: false
          story_id: "US-002"
          file_path: "internal/cli/task_test.go"
          dependencies: ["T006"]
          acceptance_criteria:
            - "Test unblocking a blocked task to Pending"
            - "Test unblocking with --status InProgress"
            - "Test unblocking removes blocked_reason field"
            - "Test unblocking non-blocked task shows warning"
            - "Test unblocking non-existent task shows error"
            - "Tests use map-based table-driven pattern with t.Parallel()"
    - number: 5
      title: "User Story 3 - View blocked tasks with reasons"
      purpose: "Display blocked tasks with their blocking reasons in status and list output"
      story_reference: "US-003"
      independent_test: "Run status command and verify blocked tasks show their reasons"
      tasks:
        - id: "T008"
          title: "Update status command to display blocked reasons in internal/cli/status.go"
          status: "Completed"
          type: "implementation"
          parallel: true
          story_id: "US-003"
          file_path: "internal/cli/status.go"
          dependencies: ["T002"]
          acceptance_criteria:
            - "autospec st shows blocked tasks with their reasons"
            - "Blocked tasks displayed in distinct section or with clear indicator"
            - "Long reasons truncated to 80 chars with '...' suffix"
            - "Missing reasons shown as '(no reason provided)'"
        - id: "T009"
          title: "Implement task list command with filters in internal/cli/task_list.go"
          status: "Completed"
          type: "implementation"
          parallel: true
          story_id: "US-003"
          file_path: "internal/cli/task_list.go"
          dependencies: ["T002"]
          acceptance_criteria:
            - "Command 'autospec task list' shows all tasks"
            - "Supports --blocked flag to filter blocked tasks"
            - "Supports --pending flag to filter pending tasks"
            - "Supports --in-progress flag to filter in-progress tasks"
            - "Supports --completed flag to filter completed tasks"
            - "Blocked tasks show their reasons"
        - id: "T010"
          title: "Add tests for status blocked reason display in internal/cli/status_test.go"
          status: "Completed"
          type: "test"
          parallel: false
          story_id: "US-003"
          file_path: "internal/cli/status_test.go"
          dependencies: ["T008"]
          acceptance_criteria:
            - "Test status output includes blocked reasons"
            - "Test truncation of long blocked reasons"
            - "Test display when blocked_reason is missing"
            - "Tests use map-based table-driven pattern with t.Parallel()"
        - id: "T011"
          title: "Add tests for task list command in internal/cli/task_test.go"
          status: "Completed"
          type: "test"
          parallel: false
          story_id: "US-003"
          file_path: "internal/cli/task_test.go"
          dependencies: ["T009"]
          acceptance_criteria:
            - "Test list with no filters shows all tasks"
            - "Test --blocked filter shows only blocked tasks"
            - "Test --pending filter shows only pending tasks"
            - "Test combination of filters"
            - "Tests use map-based table-driven pattern with t.Parallel()"
    - number: 6
      title: "User Story 4 - Validate blocked_reason field"
      purpose: "Warn when blocked tasks lack reasons to encourage documentation"
      story_reference: "US-004"
      independent_test: "Validate a tasks.yaml with a blocked task without reason and verify warning is emitted"
      tasks:
        - id: "T012"
          title: "Add validation warning for missing blocked_reason in internal/validation/artifact_tasks.go"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: "US-004"
          file_path: "internal/validation/artifact_tasks.go"
          dependencies: ["T002"]
          acceptance_criteria:
            - "Validation emits warning (not error) when status=Blocked and blocked_reason missing"
            - "Validation emits warning for empty string blocked_reason"
            - "No warning when status=Blocked and blocked_reason is present"
            - "No error when blocked_reason present on non-Blocked task"
            - "Validation still passes (exit 0) with warning"
        - id: "T013"
          title: "Update artifact command to display blocked reasons in internal/cli/artifact.go"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: "US-004"
          file_path: "internal/cli/artifact.go"
          dependencies: ["T012"]
          acceptance_criteria:
            - "Artifact validation summary shows blocked task count"
            - "Blocked tasks with reasons shown in verbose mode"
            - "Warning count incremented for blocked tasks without reason"
        - id: "T014"
          title: "Add tests for blocked_reason validation in internal/validation/artifact_tasks_test.go"
          status: "Completed"
          type: "test"
          parallel: false
          story_id: "US-004"
          file_path: "internal/validation/artifact_tasks_test.go"
          dependencies: ["T012"]
          acceptance_criteria:
            - "Test warning emitted for blocked task without reason"
            - "Test no warning for blocked task with reason"
            - "Test no error for blocked_reason on non-blocked task"
            - "Test empty string blocked_reason triggers warning"
            - "Tests use map-based table-driven pattern with t.Parallel()"
    - number: 7
      title: "Polish & Cross-Cutting Concerns"
      purpose: "Documentation updates and quality gate validation"
      tasks:
        - id: "T015"
          title: "Update autospec.implement.md with block/unblock syntax in internal/commands/autospec.implement.md"
          status: "Completed"
          type: "documentation"
          parallel: true
          story_id: null
          file_path: "internal/commands/autospec.implement.md"
          dependencies: ["T006", "T009"]
          acceptance_criteria:
            - "Document 'autospec task block T001 --reason \"reason\"' syntax"
            - "Document 'autospec task unblock T001 [--status InProgress]' syntax"
            - "Document 'autospec task list [--blocked|--pending|--in-progress|--completed]' syntax"
            - "Include examples of block/unblock workflow"
        - id: "T016"
          title: "Handle edge cases for block/unblock operations"
          status: "Completed"
          type: "implementation"
          parallel: true
          story_id: null
          file_path: "internal/cli/task_block.go"
          dependencies: ["T006"]
          acceptance_criteria:
            - "Block completed task changes status and sets reason"
            - "Empty reason string rejected with clear error message"
            - "Very long reason (>500 chars) accepted without truncation in storage"
            - "Re-blocking updates reason without error"
        - id: "T017"
          title: "Add edge case tests for block/unblock in internal/cli/task_test.go"
          status: "Completed"
          type: "test"
          parallel: true
          story_id: null
          file_path: "internal/cli/task_test.go"
          dependencies: ["T016"]
          acceptance_criteria:
            - "Test blocking completed task"
            - "Test empty reason rejection"
            - "Test very long reason acceptance"
            - "Tests use map-based table-driven pattern with t.Parallel()"
        - id: "T018"
          title: "Run quality gates: make test, make fmt, make lint, make build"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: null
          file_path: null
          dependencies: ["T015", "T016", "T017"]
          acceptance_criteria:
            - "make test passes with no failures"
            - "make fmt produces no changes"
            - "make lint reports no errors"
            - "make build produces binary successfully"
dependencies:
    user_story_order:
        - story_id: "US-001"
          depends_on: []
          blocks: ["US-002"]
        - story_id: "US-002"
          depends_on: ["US-001"]
          blocks: []
        - story_id: "US-003"
          depends_on: []
          blocks: []
        - story_id: "US-004"
          depends_on: []
          blocks: []
    phase_order:
        - phase: 1
          blocks: [2]
        - phase: 2
          blocks: [3, 4, 5, 6]
        - phase: 3
          blocks: [4]
        - phase: 4
          blocks: [7]
        - phase: 5
          blocks: [7]
        - phase: 6
          blocks: [7]
parallel_execution:
    - phase: 2
      parallel_groups:
        - tasks: ["T002", "T003"]
          rationale: "Struct modification and test writing can proceed together"
    - phase: 5
      parallel_groups:
        - tasks: ["T008", "T009"]
          rationale: "Status command and list command modify different files"
    - phase: 7
      parallel_groups:
        - tasks: ["T015", "T016", "T017"]
          rationale: "Documentation, edge cases, and tests are independent"
implementation_strategy:
    mvp_scope:
        phases: [1, 2, 3, 4]
        description: "Setup + Foundational + Block + Unblock commands"
        validation: "Can block and unblock tasks via CLI, reason stored in tasks.yaml"
    incremental_delivery:
        - milestone: "Foundation Ready"
          phases: [1, 2]
          deliverable: "TaskItem struct extended, validation passes with existing files"
        - milestone: "Core Blocking"
          phases: [1, 2, 3]
          deliverable: "Can block tasks with reasons"
        - milestone: "MVP Complete"
          phases: [1, 2, 3, 4]
          deliverable: "Full block/unblock workflow operational"
        - milestone: "Enhanced Visibility"
          phases: [1, 2, 3, 4, 5, 6]
          deliverable: "Status and list commands show blocked reasons, validation warnings"
        - milestone: "Production Ready"
          phases: [1, 2, 3, 4, 5, 6, 7]
          deliverable: "Documented, edge cases handled, quality gates pass"
_meta:
    version: "1.0.0"
    generator: "autospec"
    generator_version: "autospec dev"
    created: "2025-12-17T21:27:49Z"
    artifact_type: "tasks"
