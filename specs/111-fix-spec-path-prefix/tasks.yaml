tasks:
    branch: "111-fix-spec-path-prefix"
    created: "2026-01-30"
    spec_path: "specs/111-fix-spec-path-prefix/spec.yaml"
    plan_path: "specs/111-fix-spec-path-prefix/plan.yaml"
summary:
    total_tasks: 9
    total_phases: 4
    parallel_opportunities: 2
    estimated_complexity: "low"
phases:
    - number: 1
      title: "Test-First Development"
      purpose: "Write regression tests that verify correct spec name parsing before implementing fixes"
      tasks:
        - id: "T001"
          title: "Add table tests for GetSpecMetadata spec name parsing in internal/spec/spec_test.go"
          status: "Completed"
          type: "test"
          parallel: false
          story_id: null
          file_path: "internal/spec/spec_test.go"
          dependencies: []
          acceptance_criteria:
            - "Table test case verifies GetSpecMetadata correctly parses '110-dag-spec-validation'"
            - "Test verifies Number='110' and Name='dag-spec-validation' (not full spec name)"
            - "Edge case test for spec name starting with number (e.g., '110-2fa-implementation')"
            - "Edge case test for boundary numbers (001, 999)"
            - "Uses map[string]struct pattern per NFR-003"
            - "Tests pass with existing GetSpecMetadata implementation"
    - number: 2
      title: "User Story 1 - Fix run.go path construction"
      purpose: "Replace manual Metadata construction with GetSpecMetadata call in run.go"
      story_reference: "US-001"
      independent_test: "Run autospec run -ti on a spec with numeric prefix (e.g., 110-feature) using --spec flag and verify validation succeeds"
      tasks:
        - id: "T002"
          title: "Fix Metadata construction in internal/cli/run.go:175-178"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: "US-001"
          file_path: "internal/cli/run.go"
          dependencies: ["T001"]
          acceptance_criteria:
            - "Replace manual Metadata construction with spec.GetSpecMetadata(cfg.SpecsDir, specName) call"
            - "Handle error from GetSpecMetadata with appropriate error message using fmt.Errorf wrapping"
            - "Set Detection field to spec.DetectionExplicit"
            - "Function remains under 40 lines per NFR-001"
            - "Path construction uses specs/NNN-name/ format without leading dash"
    - number: 3
      title: "User Story 2 - Fix context.go path construction"
      purpose: "Replace manual Metadata construction with GetSpecMetadata call in prereqs/context.go"
      story_reference: "US-002"
      independent_test: "Set SPECIFY_FEATURE=110-feature and run autospec workflow to verify validation succeeds"
      tasks:
        - id: "T003"
          title: "Fix Metadata construction in internal/prereqs/context.go:159-163"
          status: "Completed"
          type: "implementation"
          parallel: true
          story_id: "US-002"
          file_path: "internal/prereqs/context.go"
          dependencies: ["T001"]
          acceptance_criteria:
            - "Replace manual Metadata construction with spec.GetSpecMetadata(specsDir, envFeature) call"
            - "Handle error from GetSpecMetadata appropriately with fmt.Errorf wrapping"
            - "Set Detection field to spec.DetectionEnvVar"
            - "Function remains under 40 lines per NFR-001"
            - "Path construction uses specs/NNN-name/ format without leading dash"
    - number: 4
      title: "Validation and Quality Gates"
      purpose: "Ensure all tests pass and code quality standards are met"
      tasks:
        - id: "T004"
          title: "Run make test to verify all existing tests pass"
          status: "Completed"
          type: "test"
          parallel: false
          story_id: null
          file_path: null
          dependencies: ["T002", "T003"]
          acceptance_criteria:
            - "make test exits with code 0"
            - "All existing tests continue to pass"
            - "New regression tests in spec_test.go pass"
        - id: "T005"
          title: "Run make fmt to ensure code formatting"
          status: "Completed"
          type: "refactor"
          parallel: true
          story_id: null
          file_path: null
          dependencies: ["T002", "T003"]
          acceptance_criteria:
            - "make fmt exits with code 0"
            - "No formatting changes required after running"
        - id: "T006"
          title: "Run make lint to verify no linting errors"
          status: "Completed"
          type: "refactor"
          parallel: true
          story_id: null
          file_path: null
          dependencies: ["T002", "T003"]
          acceptance_criteria:
            - "make lint exits with code 0"
            - "No new linting errors introduced"
        - id: "T007"
          title: "Run make build to ensure compilation succeeds"
          status: "Completed"
          type: "implementation"
          parallel: true
          story_id: null
          file_path: null
          dependencies: ["T002", "T003"]
          acceptance_criteria:
            - "make build exits with code 0"
            - "Binary compiles successfully for target platform"
        - id: "T008"
          title: "Create manual testing plan in .dev/tasks/111-fix-spec-path-prefix.md"
          status: "Completed"
          type: "documentation"
          parallel: false
          story_id: null
          file_path: ".dev/tasks/111-fix-spec-path-prefix.md"
          dependencies: ["T004", "T005", "T006", "T007"]
          acceptance_criteria:
            - "Document contains manual test scenarios for --spec flag usage"
            - "Document contains manual test scenarios for SPECIFY_FEATURE env var"
            - "Document includes 'Report Summaries' section for test results"
            - "Core manual testing steps cover path construction verification"
        - id: "T009"
          title: "Add changelog entry to internal/changelog/changelog.yaml and run make changelog-sync"
          status: "Completed"
          type: "documentation"
          parallel: false
          story_id: null
          file_path: "internal/changelog/changelog.yaml"
          dependencies: ["T004", "T005", "T006", "T007"]
          acceptance_criteria:
            - "1-3 user-facing bullets added describing the bug fix"
            - "make changelog-sync regenerates CHANGELOG.md"
            - "Changelog entry is in correct version section"
dependencies:
    user_story_order:
        - story_id: "US-001"
          depends_on: []
          blocks: []
        - story_id: "US-002"
          depends_on: []
          blocks: []
    phase_order:
        - phase: 1
          blocks: [2, 3]
        - phase: 2
          blocks: [4]
        - phase: 3
          blocks: [4]
        - phase: 4
          blocks: []
parallel_execution:
    - phase: 2
      parallel_groups:
        - tasks: ["T002", "T003"]
          rationale: "Different files (run.go vs context.go), no code dependencies between them"
    - phase: 4
      parallel_groups:
        - tasks: ["T005", "T006", "T007"]
          rationale: "Independent quality checks that can run simultaneously"
        - tasks: ["T008", "T009"]
          rationale: "Independent documentation tasks after quality gates pass"
implementation_strategy:
    mvp_scope:
        phases: [1, 2, 3]
        description: "Tests + both bug fixes - addresses all user stories"
        validation: "Run autospec run -ti with --spec flag and SPECIFY_FEATURE env var; verify no leading dash in spec paths"
    incremental_delivery:
        - milestone: "Tests Ready"
          phases: [1]
          deliverable: "Regression tests for spec name parsing in place"
        - milestone: "Bug Fix Complete"
          phases: [1, 2, 3]
          deliverable: "Both bug locations fixed, spec paths construct correctly"
        - milestone: "Release Ready"
          phases: [1, 2, 3, 4]
          deliverable: "All quality gates pass, changelog updated, ready for merge"
_meta:
    version: "1.0.0"
    generator: "autospec"
    generator_version: "autospec 0.10.3"
    created: "2026-01-30T10:38:04Z"
    artifact_type: "tasks"
