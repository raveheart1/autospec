tasks:
    branch: "084-verification-config"
    created: "2026-01-06"
    spec_path: "specs/084-verification-config/spec.yaml"
    plan_path: "specs/084-verification-config/plan.yaml"
summary:
    total_tasks: 16
    total_phases: 6
    parallel_opportunities: 4
    estimated_complexity: "medium"
phases:
    - number: 1
      title: "Setup"
      purpose: "Project initialization and new package structure"
      tasks:
        - id: "T001"
          title: "Create internal/verification package directory"
          status: "Completed"
          type: "setup"
          parallel: false
          story_id: null
          file_path: "internal/verification/"
          dependencies: []
          acceptance_criteria:
            - "internal/verification/ directory exists"
            - "Package compiles with placeholder doc.go"
    - number: 2
      title: "Foundational"
      purpose: "Core data structures that MUST be complete before user story implementation"
      tasks:
        - id: "T002"
          title: "Implement VerificationLevel enum in internal/verification/config.go"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: null
          file_path: "internal/verification/config.go"
          dependencies: ["T001"]
          acceptance_criteria:
            - "VerificationLevel type defined as string const"
            - "Constants defined: LevelBasic, LevelEnhanced, LevelFull"
            - "String values are 'basic', 'enhanced', 'full'"
            - "ParseVerificationLevel function returns error for invalid values"
        - id: "T003"
          title: "Implement VerificationConfig struct in internal/verification/config.go"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: null
          file_path: "internal/verification/config.go"
          dependencies: ["T002"]
          acceptance_criteria:
            - "VerificationConfig struct with Level field (VerificationLevel)"
            - "Feature toggle fields as *bool: AdversarialReview, Contracts, PropertyTests, MetamorphicTests"
            - "Threshold fields: MutationThreshold (float64), CoverageThreshold (float64), ComplexityMax (int)"
            - "Proper koanf and yaml struct tags on all fields"
            - "yaml 'omitempty' tags on *bool fields"
        - id: "T004"
          title: "Implement level preset mappings in internal/verification/config.go"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: null
          file_path: "internal/verification/config.go"
          dependencies: ["T003"]
          acceptance_criteria:
            - "levelPresets map defines feature sets for each level"
            - "Basic level: all features false"
            - "Enhanced level: contracts true"
            - "Full level: all four features true"
            - "GetLevelDefaults() returns preset for given level"
        - id: "T005"
          title: "Implement IsEnabled method for feature toggle resolution"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: null
          file_path: "internal/verification/config.go"
          dependencies: ["T004"]
          acceptance_criteria:
            - "IsEnabled(feature string) bool method on VerificationConfig"
            - "Returns explicit toggle value if non-nil"
            - "Falls back to level preset if toggle is nil"
            - "Supports: 'adversarial_review', 'contracts', 'property_tests', 'metamorphic_tests'"
        - id: "T006"
          title: "Add unit tests for VerificationLevel and VerificationConfig"
          status: "Completed"
          type: "test"
          parallel: false
          story_id: null
          file_path: "internal/verification/config_test.go"
          dependencies: ["T005"]
          acceptance_criteria:
            - "Map-based table tests with t.Parallel()"
            - "Tests for ParseVerificationLevel with valid and invalid inputs"
            - "Tests for level preset mappings"
            - "Tests for IsEnabled resolution logic (explicit > preset > default)"
    - number: 3
      title: "User Story 1 - Configure verification level via config file"
      purpose: "Enable users to set verification level in config file"
      story_reference: "US-001"
      independent_test: "Create a config file with verification.level set and verify it's parsed correctly"
      tasks:
        - id: "T007"
          title: "Add Verification field to Configuration struct in internal/config/config.go"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: "US-001"
          file_path: "internal/config/config.go"
          dependencies: ["T006"]
          acceptance_criteria:
            - "Verification field of type verification.VerificationConfig added to Configuration struct"
            - "Proper koanf tag: koanf:\"verification\""
            - "Import added for internal/verification package"
        - id: "T008"
          title: "Add verification.* entries to KnownKeys in internal/config/schema.go"
          status: "Completed"
          type: "implementation"
          parallel: true
          story_id: "US-001"
          file_path: "internal/config/schema.go"
          dependencies: ["T007"]
          acceptance_criteria:
            - "verification.level entry with string type, default 'basic'"
            - "verification.adversarial_review entry with bool type"
            - "verification.contracts entry with bool type"
            - "verification.property_tests entry with bool type"
            - "verification.metamorphic_tests entry with bool type"
            - "verification.mutation_threshold entry with float64 type, default 0.8"
            - "verification.coverage_threshold entry with float64 type, default 0.85"
            - "verification.complexity_max entry with int type, default 10"
            - "All keys have appropriate descriptions"
        - id: "T009"
          title: "Add verification defaults to internal/config/defaults.go"
          status: "Completed"
          type: "implementation"
          parallel: true
          story_id: "US-001"
          file_path: "internal/config/defaults.go"
          dependencies: ["T007"]
          acceptance_criteria:
            - "GetDefaults() returns verification config with level='basic'"
            - "Default thresholds: mutation=0.8, coverage=0.85, complexity_max=10"
            - "GetDefaultConfigTemplate() includes verification block with comments"
            - "Backwards compatible: existing configs without verification work unchanged"
        - id: "T010"
          title: "Add AUTOSPEC_VERIFICATION_* env var support in internal/config/config.go"
          status: "Completed"
          type: "implementation"
          parallel: true
          story_id: "US-001"
          file_path: "internal/config/config.go"
          dependencies: ["T007"]
          acceptance_criteria:
            - "envTransform() handles AUTOSPEC_VERIFICATION_* prefix"
            - "AUTOSPEC_VERIFICATION_LEVEL maps to verification.level"
            - "AUTOSPEC_VERIFICATION_MUTATION_THRESHOLD maps correctly"
            - "Environment variables take precedence over config file values"
    - number: 4
      title: "User Story 2 - Override individual verification features"
      purpose: "Enable users to enable/disable features regardless of selected level"
      story_reference: "US-002"
      independent_test: "Set level to 'basic' but explicitly enable property_tests, verify property tests are enabled"
      tasks:
        - id: "T011"
          title: "Add integration tests for feature toggle override behavior"
          status: "Completed"
          type: "test"
          parallel: false
          story_id: "US-002"
          file_path: "internal/config/config_test.go"
          dependencies: ["T010"]
          acceptance_criteria:
            - "Test: basic level + explicit property_tests=true -> property tests enabled"
            - "Test: enhanced level + explicit contracts=false -> contracts disabled"
            - "Test: full level + all explicit false -> all features disabled"
            - "Test: no explicit toggles -> level defaults applied"
            - "Map-based table tests with t.Parallel()"
    - number: 5
      title: "User Story 3 - Configure verification thresholds"
      purpose: "Enable users to configure threshold values for mutation, coverage, and complexity"
      story_reference: "US-003"
      independent_test: "Set mutation_threshold to 0.9, verify the value is accessible in verification checks"
      tasks:
        - id: "T012"
          title: "Implement validateVerificationConfig function in internal/config/validate.go"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: "US-003"
          file_path: "internal/config/validate.go"
          dependencies: ["T011"]
          acceptance_criteria:
            - "validateVerificationConfig() validates Level enum (basic/enhanced/full)"
            - "Validates MutationThreshold in range 0.0-1.0"
            - "Validates CoverageThreshold in range 0.0-1.0"
            - "Validates ComplexityMax is positive integer"
            - "Error messages include valid options/ranges"
            - "Called from ValidateConfigValues()"
        - id: "T013"
          title: "Add validation tests for verification config in internal/config/validate_test.go"
          status: "Completed"
          type: "test"
          parallel: false
          story_id: "US-003"
          file_path: "internal/config/validate_test.go"
          dependencies: ["T012"]
          acceptance_criteria:
            - "Test invalid level value produces error with valid options"
            - "Test mutation_threshold > 1.0 produces range error"
            - "Test mutation_threshold < 0.0 produces range error"
            - "Test coverage_threshold out of range"
            - "Test complexity_max <= 0 produces error"
            - "Test valid config passes validation"
    - number: 6
      title: "User Story 4 - View verification settings"
      purpose: "Enable users to see current verification settings in config show output"
      story_reference: "US-004"
      independent_test: "Run autospec config show with verification settings, verify they appear in output"
      tasks:
        - id: "T014"
          title: "Verify verification block appears in config show output"
          status: "Completed"
          type: "test"
          parallel: false
          story_id: "US-004"
          file_path: "internal/cli/config/show_test.go"
          dependencies: ["T013"]
          acceptance_criteria:
            - "Test that 'autospec config show' includes verification block"
            - "Test YAML output contains verification.level"
            - "Test JSON output (--json) contains verification settings"
            - "Effective feature toggles visible in output"
        - id: "T015"
          title: "Add effective toggles display helper in internal/verification/config.go"
          status: "Completed"
          type: "implementation"
          parallel: false
          story_id: "US-004"
          file_path: "internal/verification/config.go"
          dependencies: ["T014"]
          acceptance_criteria:
            - "GetEffectiveToggles() returns map[string]bool with resolved values"
            - "All four features included: adversarial_review, contracts, property_tests, metamorphic_tests"
            - "Values are resolved using IsEnabled logic"
        - id: "T016"
          title: "Update documentation with verification config options"
          status: "InProgress"
          type: "documentation"
          parallel: false
          story_id: "US-004"
          file_path: "docs/public/reference.md"
          dependencies: ["T015"]
          acceptance_criteria:
            - "Verification config section added to reference.md"
            - "All config options documented with types and defaults"
            - "Level descriptions explain feature sets"
            - "Environment variable overrides documented"
dependencies:
    user_story_order:
        - story_id: "US-001"
          depends_on: []
          blocks: ["US-002", "US-003", "US-004"]
        - story_id: "US-002"
          depends_on: ["US-001"]
          blocks: []
        - story_id: "US-003"
          depends_on: ["US-001"]
          blocks: []
        - story_id: "US-004"
          depends_on: ["US-001", "US-003"]
          blocks: []
    phase_order:
        - phase: 1
          blocks: [2]
        - phase: 2
          blocks: [3]
        - phase: 3
          blocks: [4, 5]
        - phase: 4
          blocks: [6]
        - phase: 5
          blocks: [6]
parallel_execution:
    - phase: 3
      parallel_groups:
        - tasks: ["T008", "T009", "T010"]
          rationale: "Different files (schema.go, defaults.go, config.go), no direct dependencies"
implementation_strategy:
    mvp_scope:
        phases: [1, 2, 3]
        description: "Setup + Foundational + US-001: Enables basic config file support for verification level"
        validation: "User can set verification.level in config and see it via 'autospec config show'"
    incremental_delivery:
        - milestone: "Foundation Ready"
          phases: [1, 2]
          deliverable: "VerificationConfig struct and level enum available for use"
        - milestone: "MVP Complete"
          phases: [1, 2, 3]
          deliverable: "Users can configure verification level in config file"
        - milestone: "Feature Toggles"
          phases: [1, 2, 3, 4]
          deliverable: "Users can override individual features regardless of level"
        - milestone: "Full Feature"
          phases: [1, 2, 3, 4, 5, 6]
          deliverable: "Complete verification config with thresholds, validation, and documentation"
_meta:
    version: "1.0.0"
    generator: "autospec"
    generator_version: "autospec 0.8.2"
    created: "2026-01-06T06:37:32Z"
    artifact_type: "tasks"
